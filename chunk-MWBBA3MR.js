var rn=Object.create;var re=Object.defineProperty,sn=Object.defineProperties,on=Object.getOwnPropertyDescriptor,an=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertyNames,V=Object.getOwnPropertySymbols,ze=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,un=Reflect.get;var Ve=(t,e,n)=>e in t?re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,We=(t,e)=>{for(var n in e||={})ie.call(e,n)&&Ve(t,n,e[n]);if(V)for(var n of V(e))He.call(e,n)&&Ve(t,n,e[n]);return t},qe=(t,e)=>sn(t,an(e));var fs=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var ds=(t,e)=>{var n={};for(var r in t)ie.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&V)for(var r of V(t))e.indexOf(r)<0&&He.call(t,r)&&(n[r]=t[r]);return n};var hs=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ln=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of cn(e))!ie.call(t,i)&&i!==n&&re(t,i,{get:()=>e[i],enumerable:!(r=on(e,i))||r.enumerable});return t};var ps=(t,e,n)=>(n=t!=null?rn(ze(t)):{},ln(e||!t||!t.__esModule?re(n,"default",{value:t,enumerable:!0}):n,t));var gs=(t,e,n)=>un(ze(t),n,e);var u=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(f){i(f)}},o=c=>{try{a(n.throw(c))}catch(f){i(f)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Ge=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},fn=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,g=s>>2,d=(s&3)<<4|a>>4,E=(a&15)<<2|f>>6,j=f&63;c||(j=64,o||(E=64)),r.push(n[g],n[d],n[E],n[j])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ge(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fn(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let f=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||f==null||d==null)throw new oe;let E=s<<2|a>>4;if(r.push(E),f!==64){let j=a<<4&240|f>>2;if(r.push(j),d!==64){let nn=f<<6&192|d;r.push(nn)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},oe=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dn=function(t){let e=Ge(t);return Je.encodeByteArray(e,!0)},L=function(t){return dn(t).replace(/\./g,"")},hn=function(t){try{return Je.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var gn=()=>pn().__FIREBASE_DEFAULTS__,mn=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bn=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&hn(t[1]);return e&&JSON.parse(e)},H=()=>{try{return gn()||mn()||bn()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_n=t=>{var e,n;return(n=(e=H())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bs=t=>{let e=_n(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ce=()=>{var t;return(t=H())===null||t===void 0?void 0:t.config},_s=t=>{var e;return(e=H())===null||e===void 0?void 0:e[`_${t}`]};var z=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Es(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[L(JSON.stringify(n)),L(JSON.stringify(o)),""].join(".")}function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Is(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function En(){var t;let e=(t=H())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ys(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vs(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ws(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ss(){let t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ts(){return!En()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){try{return typeof indexedDB=="object"}catch{return!1}}function q(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Ye(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var In="FirebaseError",v=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=In,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}},w=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new v(i,a,r)}};function yn(t,e){return t.replace(vn,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var vn=/\{\$([^}]+)}/g;function As(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function x(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Ke(s)&&Ke(o)){if(!x(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Ke(t){return t!==null&&typeof t=="object"}function Cs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Os(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ds(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Rs(t,e){let n=new ae(t,e);return n.subscribe.bind(n)}var ae=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wn(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=se),i.error===void 0&&(i.error=se),i.complete===void 0&&(i.complete=se);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function wn(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function se(){}var Sn=1e3,Tn=2,An=4*60*60*1e3,Cn=.5;function Ns(t,e=Sn,n=Tn){let r=e*Math.pow(n,t),i=Math.round(Cn*r*(Math.random()-.5)*2);return Math.min(An,r+i)}function K(t){return t&&t._delegate?t._delegate:t}var On=[],l=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(l||{}),Dn={debug:l.DEBUG,verbose:l.VERBOSE,info:l.INFO,warn:l.WARN,error:l.ERROR,silent:l.SILENT},Rn=l.INFO,Nn={[l.DEBUG]:"log",[l.VERBOSE]:"log",[l.INFO]:"info",[l.WARN]:"warn",[l.ERROR]:"error"},Mn=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Nn[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},P=class{constructor(e){this.name=e,this._logLevel=Rn,this._logHandler=Mn,this._userLogHandler=null,On.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in l))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,l.DEBUG,...e),this._logHandler(this,l.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,l.VERBOSE,...e),this._logHandler(this,l.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,l.INFO,...e),this._logHandler(this,l.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,l.WARN,...e),this._logHandler(this,l.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,l.ERROR,...e),this._logHandler(this,l.ERROR,...e)}};var b=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var D="[DEFAULT]";var ue=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new z;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xn(e))try{this.getOrInitializeService({instanceIdentifier:D})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=D){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return u(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=D){return this.instances.has(e)}getOptions(e=D){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kn(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=D){return this.component?this.component.multipleInstances?e:D:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kn(t){return t===D?void 0:t}function xn(t){return t.instantiationMode==="EAGER"}var G=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new ue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Pn=(t,e)=>e.some(n=>t instanceof n),Qe,Ze;function Bn(){return Qe||(Qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ln(){return Ze||(Ze=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var et=new WeakMap,fe=new WeakMap,tt=new WeakMap,le=new WeakMap,he=new WeakMap;function Fn(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(I(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&et.set(n,t)}).catch(()=>{}),he.set(e,t),e}function Un(t){if(fe.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fe.set(t,e)}var de={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fe.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tt.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return I(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nt(t){de=t(de)}function $n(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(J(this),e,...n);return tt.set(r,e.sort?e.sort():[e]),I(r)}:Ln().includes(t)?function(...e){return t.apply(J(this),e),I(et.get(this))}:function(...e){return I(t.apply(J(this),e))}}function jn(t){return typeof t=="function"?$n(t):(t instanceof IDBTransaction&&Un(t),Pn(t,Bn())?new Proxy(t,de):t)}function I(t){if(t instanceof IDBRequest)return Fn(t);if(le.has(t))return le.get(t);let e=jn(t);return e!==t&&(le.set(t,e),he.set(e,t)),e}var J=t=>he.get(t);function X(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=I(o);return r&&o.addEventListener("upgradeneeded",c=>{r(I(o.result),c.oldVersion,c.newVersion,I(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),a}var Vn=["get","getKey","getAll","getAllKeys","count"],zn=["put","add","delete","clear"],pe=new Map;function rt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pe.get(e))return pe.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=zn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Vn.includes(n)))return;let s=function(o,...a){return u(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),f=c.store;return r&&(f=f.index(a.shift())),(yield Promise.all([f[n](...a),i&&c.done]))[0]})};return pe.set(e,s),s}nt(t=>qe(We({},t),{get:(e,n,r)=>rt(e,n)||t.get(e,n,r),has:(e,n)=>!!rt(e,n)||t.has(e,n)}));var me=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Hn(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Hn(t){let e=t.getComponent();return e?.type==="VERSION"}var be="@firebase/app",it="0.10.11";var T=new P("@firebase/app"),Wn="@firebase/app-compat",qn="@firebase/analytics-compat",Kn="@firebase/analytics",Gn="@firebase/app-check-compat",Jn="@firebase/app-check",Xn="@firebase/auth",Yn="@firebase/auth-compat",Qn="@firebase/database",Zn="@firebase/database-compat",er="@firebase/functions",tr="@firebase/functions-compat",nr="@firebase/installations",rr="@firebase/installations-compat",ir="@firebase/messaging",sr="@firebase/messaging-compat",or="@firebase/performance",ar="@firebase/performance-compat",cr="@firebase/remote-config",ur="@firebase/remote-config-compat",lr="@firebase/storage",fr="@firebase/storage-compat",dr="@firebase/firestore",hr="@firebase/vertexai-preview",pr="@firebase/firestore-compat",gr="firebase",mr="10.13.2";var _e="[DEFAULT]",br={[be]:"fire-core",[Wn]:"fire-core-compat",[Kn]:"fire-analytics",[qn]:"fire-analytics-compat",[Jn]:"fire-app-check",[Gn]:"fire-app-check-compat",[Xn]:"fire-auth",[Yn]:"fire-auth-compat",[Qn]:"fire-rtdb",[Zn]:"fire-rtdb-compat",[er]:"fire-fn",[tr]:"fire-fn-compat",[nr]:"fire-iid",[rr]:"fire-iid-compat",[ir]:"fire-fcm",[sr]:"fire-fcm-compat",[or]:"fire-perf",[ar]:"fire-perf-compat",[cr]:"fire-rc",[ur]:"fire-rc-compat",[lr]:"fire-gcs",[fr]:"fire-gcs-compat",[dr]:"fire-fst",[pr]:"fire-fst-compat",[hr]:"fire-vertex","fire-js":"fire-js",[gr]:"fire-js-all"};var F=new Map,_r=new Map,Ee=new Map;function st(t,e){try{t.container.addComponent(e)}catch(n){T.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function C(t){let e=t.name;if(Ee.has(e))return T.debug(`There were multiple attempts to register component ${e}.`),!1;Ee.set(e,t);for(let n of F.values())st(n,t);for(let n of _r.values())st(n,t);return!0}function B(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xs(t){return t.settings!==void 0}var Er={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},A=new w("app","Firebase",Er);var Ie=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new b("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw A.create("app-deleted",{appName:this._name})}};var Ys=mr;function Ir(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:_e,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw A.create("bad-app-name",{appName:String(i)});if(n||(n=ce()),!n)throw A.create("no-options");let s=F.get(i);if(s){if(x(n,s.options)&&x(r,s.config))return s;throw A.create("duplicate-app",{appName:i})}let o=new G(i);for(let c of Ee.values())o.addComponent(c);let a=new Ie(n,r,o);return F.set(i,a),a}function we(t=_e){let e=F.get(t);if(!e&&t===_e&&ce())return Ir();if(!e)throw A.create("no-app",{appName:t});return e}function Qs(){return Array.from(F.values())}function S(t,e,n){var r;let i=(r=br[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),T.warn(a.join(" "));return}C(new b(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var yr="firebase-heartbeat-database",vr=1,U="firebase-heartbeat-store",ge=null;function ut(){return ge||(ge=X(yr,vr,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(U)}catch(n){console.warn(n)}}}}).catch(t=>{throw A.create("idb-open",{originalErrorMessage:t.message})})),ge}function wr(t){return u(this,null,function*(){try{let n=(yield ut()).transaction(U),r=yield n.objectStore(U).get(lt(t));return yield n.done,r}catch(e){if(e instanceof v)T.warn(e.message);else{let n=A.create("idb-get",{originalErrorMessage:e?.message});T.warn(n.message)}}})}function ot(t,e){return u(this,null,function*(){try{let r=(yield ut()).transaction(U,"readwrite");yield r.objectStore(U).put(e,lt(t)),yield r.done}catch(n){if(n instanceof v)T.warn(n.message);else{let r=A.create("idb-set",{originalErrorMessage:n?.message});T.warn(r.message)}}})}function lt(t){return`${t.name}!${t.options.appId}`}var Sr=1024,Tr=30*24*60*60*1e3,ye=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ve(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return u(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=at();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Tr}),this._storage.overwrite(this._heartbeatsCache))}catch(r){T.warn(r)}})}getHeartbeatsHeader(){return u(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=at(),{heartbeatsToSend:r,unsentEntries:i}=Ar(this._heartbeatsCache.heartbeats),s=L(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return T.warn(n),""}})}};function at(){return new Date().toISOString().substring(0,10)}function Ar(t,e=Sr){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ct(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ct(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ve=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return u(this,null,function*(){return W()?q().then(()=>!0).catch(()=>!1):!1})}read(){return u(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield wr(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ot(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ot(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function ct(t){return L(JSON.stringify({version:2,heartbeats:t})).length}function Cr(t){C(new b("platform-logger",e=>new me(e),"PRIVATE")),C(new b("heartbeat",e=>new ye(e),"PRIVATE")),S(be,it,t),S(be,it,"esm2017"),S("fire-js","")}Cr("");var ht="@firebase/installations",Ce="0.6.9";var pt=1e4,gt=`w:${Ce}`,mt="FIS_v2",Or="https://firebaseinstallations.googleapis.com/v1",Dr=60*60*1e3,Rr="installations",Nr="Installations";var Mr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},N=new w(Rr,Nr,Mr);function bt(t){return t instanceof v&&t.code.includes("request-failed")}function _t({projectId:t}){return`${Or}/projects/${t}/installations`}function Et(t){return{token:t.token,requestStatus:2,expiresIn:xr(t.expiresIn),creationTime:Date.now()}}function It(t,e){return u(this,null,function*(){let r=(yield e.json()).error;return N.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function yt({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function kr(t,{refreshToken:e}){let n=yt(t);return n.append("Authorization",Pr(e)),n}function vt(t){return u(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function xr(t){return Number(t.replace("s","000"))}function Pr(t){return`${mt} ${t}`}function Br(r,i){return u(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=_t(t),o=yt(t),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={fid:n,authVersion:mt,appId:t.appId,sdkVersion:gt},f={method:"POST",headers:o,body:JSON.stringify(c)},g=yield vt(()=>fetch(s,f));if(g.ok){let d=yield g.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Et(d.authToken)}}else throw yield It("Create Installation",g)})}function wt(t){return new Promise(e=>{setTimeout(e,t)})}function Lr(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var Fr=/^[cdef][\w-]{21}$/,Ae="";function Ur(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=$r(t);return Fr.test(n)?n:Ae}catch{return Ae}}function $r(t){return Lr(t).substr(0,22)}function Q(t){return`${t.appName}!${t.appId}`}var St=new Map;function Tt(t,e){let n=Q(t);At(n,e),jr(n,e)}function At(t,e){let n=St.get(t);if(n)for(let r of n)r(e)}function jr(t,e){let n=Vr();n&&n.postMessage({key:t,fid:e}),zr()}var R=null;function Vr(){return!R&&"BroadcastChannel"in self&&(R=new BroadcastChannel("[Firebase] FID Change"),R.onmessage=t=>{At(t.data.key,t.data.fid)}),R}function zr(){St.size===0&&R&&(R.close(),R=null)}var Hr="firebase-installations-database",Wr=1,M="firebase-installations-store",Se=null;function Oe(){return Se||(Se=X(Hr,Wr,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(M)}}})),Se}function Y(t,e){return u(this,null,function*(){let n=Q(t),i=(yield Oe()).transaction(M,"readwrite"),s=i.objectStore(M),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&Tt(t,e.fid),e})}function Ct(t){return u(this,null,function*(){let e=Q(t),r=(yield Oe()).transaction(M,"readwrite");yield r.objectStore(M).delete(e),yield r.done})}function Z(t,e){return u(this,null,function*(){let n=Q(t),i=(yield Oe()).transaction(M,"readwrite"),s=i.objectStore(M),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&Tt(t,a.fid),a})}function De(t){return u(this,null,function*(){let e,n=yield Z(t.appConfig,r=>{let i=qr(r),s=Kr(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Ae?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function qr(t){let e=t||{fid:Ur(),registrationStatus:0};return Ot(e)}function Kr(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(N.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Gr(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Jr(t)}:{installationEntry:e}}function Gr(t,e){return u(this,null,function*(){try{let n=yield Br(t,e);return Y(t.appConfig,n)}catch(n){throw bt(n)&&n.customData.serverCode===409?yield Ct(t.appConfig):yield Y(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function Jr(t){return u(this,null,function*(){let e=yield ft(t.appConfig);for(;e.registrationStatus===1;)yield wt(100),e=yield ft(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield De(t);return r||n}return e})}function ft(t){return Z(t,e=>{if(!e)throw N.create("installation-not-found");return Ot(e)})}function Ot(t){return Xr(t)?{fid:t.fid,registrationStatus:0}:t}function Xr(t){return t.registrationStatus===1&&t.registrationTime+pt<Date.now()}function Yr(r,i){return u(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=Qr(t,n),o=kr(t,n),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={installation:{sdkVersion:gt,appId:t.appId}},f={method:"POST",headers:o,body:JSON.stringify(c)},g=yield vt(()=>fetch(s,f));if(g.ok){let d=yield g.json();return Et(d)}else throw yield It("Generate Auth Token",g)})}function Qr(t,{fid:e}){return`${_t(t)}/${e}/authTokens:generate`}function Re(t,e=!1){return u(this,null,function*(){let n,r=yield Z(t.appConfig,s=>{if(!Dt(s))throw N.create("not-registered");let o=s.authToken;if(!e&&ti(o))return s;if(o.requestStatus===1)return n=Zr(t,e),s;{if(!navigator.onLine)throw N.create("app-offline");let a=ri(s);return n=ei(t,a),a}});return n?yield n:r.authToken})}function Zr(t,e){return u(this,null,function*(){let n=yield dt(t.appConfig);for(;n.authToken.requestStatus===1;)yield wt(100),n=yield dt(t.appConfig);let r=n.authToken;return r.requestStatus===0?Re(t,e):r})}function dt(t){return Z(t,e=>{if(!Dt(e))throw N.create("not-registered");let n=e.authToken;return ii(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ei(t,e){return u(this,null,function*(){try{let n=yield Yr(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Y(t.appConfig,r),n}catch(n){if(bt(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield Ct(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Y(t.appConfig,r)}throw n}})}function Dt(t){return t!==void 0&&t.registrationStatus===2}function ti(t){return t.requestStatus===2&&!ni(t)}function ni(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Dr}function ri(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function ii(t){return t.requestStatus===1&&t.requestTime+pt<Date.now()}function si(t){return u(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield De(e);return r?r.catch(console.error):Re(e).catch(console.error),n.fid})}function oi(t,e=!1){return u(this,null,function*(){let n=t;return yield ai(n),(yield Re(n,e)).token})}function ai(t){return u(this,null,function*(){let{registrationPromise:e}=yield De(t);e&&(yield e)})}function ci(t){if(!t||!t.options)throw Te("App Configuration");if(!t.name)throw Te("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Te(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Te(t){return N.create("missing-app-config-values",{valueName:t})}var Rt="installations",ui="installations-internal",li=t=>{let e=t.getProvider("app").getImmediate(),n=ci(e),r=B(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fi=t=>{let e=t.getProvider("app").getImmediate(),n=B(e,Rt).getImmediate();return{getId:()=>si(n),getToken:i=>oi(n,i)}};function di(){C(new b(Rt,li,"PUBLIC")),C(new b(ui,fi,"PRIVATE"))}di();S(ht,Ce);S(ht,Ce,"esm2017");var Nt="@firebase/performance",Be="0.6.9";var $t=Be,hi="FB-PERF-TRACE-START",pi="FB-PERF-TRACE-STOP",Le="FB-PERF-TRACE-MEASURE",jt="_wt_",Vt="_fp",zt="_fcp",Ht="_fid",Wt="@firebase/performance/config",qt="@firebase/performance/configexpire",gi="performance",Kt="Performance";var mi={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},p=new w(gi,Kt,mi);var y=new P(Kt);y.logLevel=l.INFO;var Ne,Gt,h=class t{constructor(e){if(this.window=e,!e)throw p.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Ye()?(y.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):W()?!0:(y.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(let s of i.getEntries())n(s)}).observe({entryTypes:[e]})}static getInstance(){return Ne===void 0&&(Ne=new t(Gt)),Ne}};function bi(t){Gt=t}var Jt;function _i(t){let e=t.getId();return e.then(n=>{Jt=n}),e}function Ue(){return Jt}function Ei(t){let e=t.getToken();return e.then(n=>{}),e}function Mt(t,e){let n=t.length-e.length;if(n<0||n>1)throw p.create("invalid String merger input");let r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Me,m=class t{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Mt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Mt("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Me===void 0&&(Me=new t),Me}};var $=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}($||{}),Ii=["firebase_","google_","ga_"],yi=new RegExp("^[a-zA-Z]\\w*$"),vi=40,wi=100;function Si(){let t=h.getInstance().navigator;return t?.serviceWorker?t.serviceWorker.controller?2:3:1}function Xt(){switch(h.getInstance().document.visibilityState){case"visible":return $.VISIBLE;case"hidden":return $.HIDDEN;default:return $.UNKNOWN}}function Ti(){let e=h.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Ai(t){return t.length===0||t.length>vi?!1:!Ii.some(n=>t.startsWith(n))&&!!t.match(yi)}function Ci(t){return t.length!==0&&t.length<=wi}function Yt(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.appId;if(!n)throw p.create("no app id");return n}function Oi(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!n)throw p.create("no project id");return n}function Di(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!n)throw p.create("no api key");return n}var Ri="0.0.1",_={loggingEnabled:!0},Ni="FIREBASE_INSTALLATIONS_AUTH";function Mi(t,e){let n=ki();return n?(kt(n),Promise.resolve()):Bi(t,e).then(kt).then(r=>xi(r),()=>{})}function ki(){let t=h.getInstance().localStorage;if(!t)return;let e=t.getItem(qt);if(!e||!Li(e))return;let n=t.getItem(Wt);if(n)try{return JSON.parse(n)}catch{return}}function xi(t){let e=h.getInstance().localStorage;!t||!e||(e.setItem(Wt,JSON.stringify(t)),e.setItem(qt,String(Date.now()+m.getInstance().configTimeToLive*60*60*1e3)))}var Pi="Could not fetch config, will use default configs";function Bi(t,e){return Ei(t.installations).then(n=>{let r=Oi(t.app),i=Di(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${Ni} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:Yt(t.app),app_version:$t,sdk_version:Ri})});return fetch(o).then(a=>{if(a.ok)return a.json();throw p.create("RC response not ok")})}).catch(()=>{y.info(Pi)})}function kt(t){if(!t)return t;let e=m.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=_.loggingEnabled,n.fpr_log_source?e.logSource=Number(n.fpr_log_source):_.logSource&&(e.logSource=_.logSource),n.fpr_log_endpoint_url?e.logEndPointUrl=n.fpr_log_endpoint_url:_.logEndPointUrl&&(e.logEndPointUrl=_.logEndPointUrl),n.fpr_log_transport_key?e.transportKey=n.fpr_log_transport_key:_.transportKey&&(e.transportKey=_.transportKey),n.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):_.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=_.networkRequestsSamplingRate),n.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):_.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=_.tracesSamplingRate),e.logTraceAfterSampling=xt(e.tracesSamplingRate),e.logNetworkAfterSampling=xt(e.networkRequestsSamplingRate),t}function Li(t){return Number(t)>Date.now()}function xt(t){return Math.random()<=t}var $e=1,ke;function Qt(t){return $e=2,ke=ke||Ui(t),ke}function Fi(){return $e===3}function Ui(t){return $i().then(()=>_i(t.installations)).then(e=>Mi(t,e)).then(()=>Pt(),()=>Pt())}function $i(){let t=h.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){let n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function Pt(){$e=3}var je=10*1e3,ji=5.5*1e3,Zt=3,Vi=1e3,te=Zt,O=[],Bt=!1;function zi(){Bt||(ne(ji),Bt=!0)}function ne(t){setTimeout(()=>{if(te!==0){if(!O.length)return ne(je);Hi()}},t)}function Hi(){let t=O.splice(0,Vi),e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:m.getInstance().logSource,log_event:e};Wi(n,t).catch(()=>{O=[...t,...O],te--,y.info(`Tries left: ${te}.`),ne(je)})}function Wi(t,e){return qi(t).then(n=>(n.ok||y.info("Call to Firebase backend failed."),n.json())).then(n=>{let r=Number(n.nextRequestWaitMillis),i=je;isNaN(r)||(i=Math.max(r,i));let s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(O=[...e,...O],y.info("Retry transport request later.")),te=Zt,ne(i)})}function qi(t){let e=m.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function Ki(t){if(!t.eventTime||!t.message)throw p.create("invalid cc log");O=[...O,t]}function Gi(t){return(...e)=>{let n=t(...e);Ki({message:n,eventTime:Date.now()})}}var xe;function en(t,e){xe||(xe=Gi(Xi)),xe(t,e)}function ee(t){let e=m.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||h.getInstance().requiredApisAvailable()&&(t.isAuto&&Xt()!==$.VISIBLE||(Fi()?Pe(t):Qt(t.performanceController).then(()=>Pe(t),()=>Pe(t))))}function Pe(t){if(!Ue())return;let e=m.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>en(t,1),0)}function Ji(t){let e=m.getInstance();if(!e.instrumentationEnabled)return;let n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>en(t,0),0)}function Xi(t,e){return e===0?Yi(t):Qi(t)}function Yi(t){let e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:tn(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function Qi(t){let e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);let n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);let r={application_info:tn(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function tn(t){return{google_app_id:Yt(t),app_instance_id:Ue(),web_app_info:{sdk_version:$t,page_url:h.getInstance().getUrl(),service_worker_status:Si(),visibility_state:Xt(),effective_connection_type:Ti()},application_process_state:0}}var Zi=100,es="_",ts=[Vt,zt,Ht];function ns(t,e){return t.length===0||t.length>Zi?!1:e&&e.startsWith(jt)&&ts.indexOf(t)>-1||!t.startsWith(es)}function rs(t){let e=Math.floor(t);return e<t&&y.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}var k=class t{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=h.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${hi}-${this.randomId}-${this.name}`,this.traceStopMark=`${pi}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${Le}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw p.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw p.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ee(this)}record(e,n,r){if(e<=0)throw p.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw p.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(let i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));ee(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(ns(e,this.name))this.counters[e]=rs(n??0);else throw p.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){let r=Ai(e),i=Ci(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw p.create("invalid attribute name",{attributeName:e});if(!i)throw p.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){let e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i){let s=h.getInstance().getUrl();if(!s)return;let o=new t(e,jt+s,!0),a=Math.floor(h.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),n&&n[0]&&(o.setDuration(Math.floor(n[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));let c="first-paint",f="first-contentful-paint";if(r){let g=r.find(E=>E.name===c);g&&g.startTime&&o.putMetric(Vt,Math.floor(g.startTime*1e3));let d=r.find(E=>E.name===f);d&&d.startTime&&o.putMetric(zt,Math.floor(d.startTime*1e3)),i&&o.putMetric(Ht,Math.floor(i*1e3))}ee(o)}static createUserTimingTrace(e,n){let r=new t(e,n,!1,n);ee(r)}};function Lt(t,e){let n=e;if(!n||n.responseStart===void 0)return;let r=h.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),s=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],c={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};Ji(c)}var is=5e3;function Ft(t){Ue()&&(setTimeout(()=>os(t),0),setTimeout(()=>ss(t),0),setTimeout(()=>as(t),0))}function ss(t){let e=h.getInstance(),n=e.getEntriesByType("resource");for(let r of n)Lt(t,r);e.setupObserver("resource",r=>Lt(t,r))}function os(t){let e=h.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{k.createOobTrace(t,n,r),i=void 0},is);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),k.createOobTrace(t,n,r,s))})}else k.createOobTrace(t,n,r)}function as(t){let e=h.getInstance(),n=e.getEntriesByType("measure");for(let r of n)Ut(t,r);e.setupObserver("measure",r=>Ut(t,r))}function Ut(t,e){let n=e.name;n.substring(0,Le.length)!==Le&&k.createUserTimingTrace(t,n)}var Fe=class{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),h.getInstance().requiredApisAvailable()?q().then(n=>{n&&(zi(),Qt(this).then(()=>Ft(this),()=>Ft(this)),this.initialized=!0)}).catch(n=>{y.info(`Environment doesn't support IndexedDB: ${n}`)}):y.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){m.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return m.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){m.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return m.getInstance().dataCollectionEnabled}},cs="[DEFAULT]";function po(t=we()){return t=K(t),B(t,"performance").getImmediate()}function go(t,e){t=K(t);let n=B(t,"performance");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(x(s,e??{}))return i;throw p.create("already initialized")}return n.initialize({options:e})}function mo(t,e){return t=K(t),new k(t,e)}var us=(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==cs)throw p.create("FB not default");if(typeof window>"u")throw p.create("no window");bi(window);let i=new Fe(n,r);return i._init(e),i};function ls(){C(new b("performance",us,"PUBLIC")),S(Nt,Be),S(Nt,Be,"esm2017")}ls();export{We as a,qe as b,fs as c,ds as d,hs as e,ps as f,gs as g,u as h,hn as i,_n as j,bs as k,_s as l,Es as m,Xe as n,Is as o,ys as p,vs as q,ws as r,Ss as s,Ts as t,W as u,q as v,Ye as w,v as x,w as y,As as z,x as A,Cs as B,Os as C,Ds as D,Rs as E,Ns as F,K as G,b as H,l as I,P as J,C as K,B as L,Xs as M,Ys as N,Ir as O,we as P,Qs as Q,S as R,po as S,go as T,mo as U};
